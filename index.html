<!DOCTYPE html>

<html>
<head>
	<meta charset="utf-8">
	<title>Searches</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

	<style>
		body {
			background-color: #222;
			padding: 0;
			margin: 0;
		}
		body, input, textarea {
			font-size: 20pt;
			font-family: serif;
		}

		@media (max-width: 700px) {
			body, input, textarea {
				font-size: 13pt;
			}
		}

		#wrapper {
			padding-top: 2.5em;
		}

		#query {
			background-color: #222;
			z-index: 100;
			width: 100%;
			height: 2em;
			padding-left: 1em;
			padding-top: 1em;
			position: absolute;
			left: 0;
			top: 0;
		}
		#query input {
			font-size: 1.2em;
			color: #eee;
			background-color: transparent;
			width: 100%;
			border: none;
			border-radius: 0;
			border-bottom: 0.15em solid #000;
			line-height: 1.3;
			padding: 0;
			margin: 0;
		}
		@media screen and (min-height: 200px) {
			#query {
				position: fixed;
			}
		}

		#buttons {
			margin-top: 0.7em;
			margin-left: 0.5em;
		}
		#buttons .group {
			padding-left: 1.5em;
		}
		#buttons .group .name {
			color: #eee;
			font-size: 1em;
			line-height: 1;
			font-weight: normal;
			margin: 0;
			width: 1em;
			float: left;
			position: absolute;
			margin-left: -1.5em;
		}

		#buttons input[type=button] {
			width: 7.3em;
			height: 2.2em;
			margin: 0 0.2em 0.2em 0;
			color: #eee;
			background-color: #000;
			border: none;
			border-radius: 0.3em;
			-webkit-appearance: none;
		}
	</style>
</head>
<body>

	<div id="wrapper">
		<div id="query">
			<input type="text" rows="1" placeholder="検索内容" />
		</div>
		<div id="buttons"></div>
	</div>

	<script>
		(function () {
			'use strict';

			var searches = {
				辞書: {
					和: {
						'Y!': 'http://dic.search.yahoo.co.jp/dsearch?p=%s&dic_id=jj&stype=prefix&b=1',
						goo: 'http://dictionary.goo.ne.jp/freewordsearcher.html?MT=%s&mode=0&id=top&kind=jn',
						ALC: 'http://eow.alc.co.jp/%s',
						jisho: 'http://jisho.org/search/%s',
						類語: 'http://thesaurus.weblio.jp/content_find?query=%s&searchType=exact',
					},
					英: {
						英英: 'http://www.thefreedictionary.com/%s',
						類語: 'http://thesaurus.com/browse/%s',
					},
					西: {
						RAE: 'http://lema.rae.es/drae/?val=%s',
						西英西: 'http://www.wordreference.com/enit/translation.asp?dict=esen&w=%s',
					},
					仏: {
						仏英仏: 'http://www.wordreference.com/enit/translation.asp?enit=%s&dict=fren',
					}
				},
				WP: {
					和: 'http://ja.wikipedia.org/w/index.php?search=%s',
					英: 'http://en.wikipedia.org/w/index.php?search=%s',
					西: 'http://es.wikipedia.org/w/index.php?search=%s',
				},
				画: {
					画像: 'http://www.google.com/search?safe=off&tbm=isch&q=%s',
					動画: 'https://www.google.com/search?safe=off&tbm=vid&q=%s',
					nico: 'http://www.nicovideo.jp/search/%s',
				},
				一般: {
					Duck: 'https://duckduckgo.com/?q=%s',
					Google: 'http://www.google.com/search?q=%s',
					映画: 'http://www.imdb.com/find?q=%s&s=all',
				},
			};


			// Utilities.

			var toArray = Function.prototype.call.bind([].slice);
			var sel = document.querySelector.bind(document);
			var makeEl = function (tag, attrs) {
				var children = toArray(arguments, 2);
				var el = document.createElement(tag);
				if (attrs) Object.keys(attrs).forEach(function (attr) { el.setAttribute(attr, attrs[attr]) });
				children.map(function (obj) { return typeof obj === 'string' ? document.createTextNode(obj) : obj })
					.forEach(function (node) { el.appendChild(node) });
				return el;
			};

			function appendButtons(container, obj, name) {
				if (name) {
					container.appendChild(makeEl('h1', { 'class': 'name' }, name));
				};
				Object.keys(obj).forEach( function (name) {
					var current = obj[name];
					if (typeof current === 'string') {
						var button = makeEl('input', { type: 'button', value: name });
						container.appendChild(button);
						button.addEventListener('click', function () {
							window.location = current.replace('%s', encodeURI(query.value));
						});
					} else {
						var subContainer = makeEl('div', { 'class': ['group', 'group-' + (++groupIndex), 'group-' + name.replace(/\s/, '-')].join(' ') });
						appendButtons(subContainer, current, name);
						container.appendChild(subContainer);
					}
				});
			}


			var query = sel('#query input');

			var groupIndex = 0;
			appendButtons(sel('#buttons'), searches);

			if (document.activeElement !== query) {
				query.select();
			}

		})();
	</script>

</body>
</html>