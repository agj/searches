<!DOCTYPE html>

<html>
<head>
	<meta charset="utf-8">
	<title>Searches</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

	<style>
		body {
			background-color: #222;
			padding: 0;
			margin: 0;
		}
		body, input, textarea {
			font-size: 20pt;
			font-family: serif;
		}

		@media (max-width: 700px) {
			body, input, textarea {
				font-size: 13pt;
			}
		}

		#wrapper {
			padding-top: 2.5em;
		}

		#query {
			background-color: #222;
			z-index: 100;
			width: 100%;
			height: 2em;
			padding-left: 1em;
			padding-top: 1em;
			position: absolute;
			left: 0;
			top: 0;
		}
		#query input {
			font-size: 1.2em;
			color: #eee;
			background-color: transparent;
			width: 100%;
			border: none;
			border-radius: 0;
			border-bottom: 0.15em solid #000;
			line-height: 1.3;
			padding: 0;
			margin: 0;
		}
		@media screen and (min-height: 200px) {
			#query {
				position: fixed;
			}
		}

		#buttons {
			margin-top: 0.7em;
			margin-left: 0.5em;
		}

		#buttons input[type=button] {
			width: 7.3em;
			height: 2.2em;
			margin: 0 0.2em 0.2em 0;
			color: #eee;
			background-color: #000;
			border: none;
			border-radius: 0.3em;
			-webkit-appearance: none;
		}
	</style>
</head>
<body>

	<div id="wrapper">
		<div id="query">
			<input type="text" rows="1" placeholder="検索内容" />
		</div>
		<div id="buttons"></div>
	</div>

	<script>
		(function () {
			'use strict';

			const searches = [
				{ name: 'Duck',
				  url:  'https://duckduckgo.com/?q=%s' },
				{ name: 'Google',
				  url:  'http://www.google.com/search?q=%s' },
				{ name: 'goo',
				  url:  'https://dictionary.goo.ne.jp/freewordsearcher.html?MT=%s&mode=0&kind=all' },
				{ name: 'ALC',
				  url:  'http://eow.alc.co.jp/%s' },
				{ name: 'jisho',
				  url:  'http://jisho.org/search/%s' },
				{ name: '和 類語',
				  url:  'http://thesaurus.weblio.jp/content_find?query=%s&searchType=exact' },
				{ name: '数え方',
				  url:  'http://www.sanabo.com/kazoekata/?s=%s' },
				{ name: 'Y!辞書',
				  url:  'http://dic.search.yahoo.co.jp/dsearch?p=%s&dic_id=jj&stype=prefix&b=1' },
				{ name: 'pinpin',
				  url:  'http://dictionary.pinpinchinese.com/search/t/%s' },
				{ name: '英→英',
				  url:  'http://www.thefreedictionary.com/%s' },
				{ name: '西→英',
				  url:  'http://www.wordreference.com/enit/translation.asp?dict=esen&w=%s' },
				{ name: '英 類語',
				  url:  'http://thesaurus.com/browse/%s' },
				{ name: 'RAE',
				  url:  'https://dle.rae.es/?id=%s' },
				{ name: '仏→英',
				  url:  'http://www.wordreference.com/enit/translation.asp?enit=%s&dict=fren' },
				{ name: 'Wiki和',
				  url:  'http://ja.wikipedia.org/w/index.php?search=%s' },
				{ name: 'Wiki英',
				  url:  'http://en.wikipedia.org/w/index.php?search=%s' },
				{ name: 'Wiki西',
				  url:  'http://es.wikipedia.org/w/index.php?search=%s' },
				{ name: 'Wiki中',
				  url:  'http://zh.wikipedia.org/w/index.php?search=%s' },
				{ name: '画像',
				  url:  'http://www.google.com/search?safe=off&tbm=isch&q=%s' },
				{ name: '動画',
				  url:  'https://www.google.com/search?safe=off&tbm=vid&q=%s' },
				{ name: 'nico',
				  url:  'http://www.nicovideo.jp/search/%s' },
				{ name: 'TMDb',
				  url:  'https://www.themoviedb.org/search?query=%s' },
				{ name: 'BGG',
				  url:  'https://boardgamegeek.com/geeksearch.php?action=search&objecttype=boardgame&q=%s' },
				{ name: 'Amazon.com',
					url:  'http://www.amazon.com/s/?field-keywords=%s' },
				{ name: 'Amazon.co.jp',
					url:  'http://www.amazon.co.jp/s/?field-keywords=%s' },
			];


			// Utilities.

			var toArray = Function.prototype.call.bind([].slice);
			var sel = document.querySelector.bind(document);
			var makeEl = function (tag, attrs) {
				var children = toArray(arguments, 2);
				var el = document.createElement(tag);
				if (attrs) Object.keys(attrs).forEach(function (attr) { el.setAttribute(attr, attrs[attr]) });
				children.map(function (obj) { return typeof obj === 'string' ? document.createTextNode(obj) : obj })
					.forEach(function (node) { el.appendChild(node) });
				return el;
			};


			var query = sel('#query input');

			const buttonsContainer = sel('#buttons');

			searches.map((obj) => {
				var button = makeEl('input', { type: 'button', value: obj.name });
				button.addEventListener('click', function () {
					window.location = obj.url.replace('%s', encodeURIComponent(query.value));
				});
				return button;
			})
			.forEach(button => buttonsContainer.appendChild(button));


			if (document.activeElement !== query) {
				query.select();
			}

		})();
	</script>

</body>
</html>